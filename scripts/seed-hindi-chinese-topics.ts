import { prisma } from "../lib/prisma";
import { generateSlug } from "../lib/slug";

async function main() {
  // Buscar o primeiro user (ou o user espec├нfico)
  const user = await prisma.user.findFirst({
    orderBy: { createdAt: "desc" },
  });

  if (!user) {
    throw new Error("Nenhum user encontrado! Cria um user primeiro.");
  }

  console.log(`\nЁЯОп A criar t├│picos para: ${user.username} (${user.email})`);
  console.log(`   User ID: ${user.id}\n`);

  const topics = [
    // Hindi (hi) - 10 t├│picos pol├кmicos
    {
      title: "рдХреНрдпрд╛ рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдорд╛рдирд╡ рдиреМрдХрд░рд┐рдпреЛрдВ рдХреЛ рдЦрддреНрдо рдХрд░ рджреЗрдЧреА?",
      description:
        "AI рдФрд░ рдСрдЯреЛрдореЗрд╢рди рдХрд╛ рдмрдврд╝рддрд╛ рдЙрдкрдпреЛрдЧ - рдХреНрдпрд╛ рдпрд╣ рд░реЛрдЬрдЧрд╛рд░ рдХреЗ рд▓рд┐рдП рдЦрддрд░рд╛ рд╣реИ рдпрд╛ рдирдП рдЕрд╡рд╕рд░ рдЦреЛрд▓реЗрдЧрд╛?",
      language: "hi" as const,
    },
    {
      title: "рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рд▓реЛрдХрддрдВрддреНрд░ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫрд╛ рд╣реИ рдпрд╛ рдмреБрд░рд╛?",
      description:
        "рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рдиреЗ рд░рд╛рдЬрдиреАрддрд┐рдХ рдЪрд░реНрдЪрд╛ рдХреЛ рдХреИрд╕реЗ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ - рд╕рдХрд╛рд░рд╛рддреНрдордХ рдпрд╛ рдирдХрд╛рд░рд╛рддреНрдордХ?",
      language: "hi" as const,
    },
    {
      title: "рдХреНрдпрд╛ рдХреНрд░рд┐рдкреНрдЯреЛрдХрд░реЗрдВрд╕реА рдкрд╛рд░рдВрдкрд░рд┐рдХ рдореБрджреНрд░рд╛ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ?",
      description:
        "Bitcoin рдФрд░ рдЕрдиреНрдп рдХреНрд░рд┐рдкреНрдЯреЛрдХрд░реЗрдВрд╕реА - рдХреНрдпрд╛ рдпрд╣ рднрд╡рд┐рд╖реНрдп рдХреА рдореБрджреНрд░рд╛ рд╣реИ рдпрд╛ рд╕рд┐рд░реНрдл рд╕рдЯреНрдЯреЗрдмрд╛рдЬреА?",
      language: "hi" as const,
    },
    {
      title: "рджреВрд░рд╕реНрде рдХрд╛рд░реНрдп рдмреЗрд╣рддрд░ рд╣реИ рдпрд╛ рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рдХрд╛рдо?",
      description:
        "COVID рдХреЗ рдмрд╛рдж, рдХрдВрдкрдирд┐рдпрд╛рдВ рдХрд░реНрдордЪрд╛рд░рд┐рдпреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдмреБрд▓рд╛ рд░рд╣реА рд╣реИрдВ - рдХреНрдпрд╛ рдпрд╣ рд╕рд╣реА рд╣реИ?",
      language: "hi" as const,
    },
    {
      title: "рдЬрд▓рд╡рд╛рдпреБ рдкрд░рд┐рд╡рд░реНрддрди: рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ?",
      description:
        "рдХреНрдпрд╛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдкреНрд░рдпрд╛рд╕ рдЬрд▓рд╡рд╛рдпреБ рд╕рдВрдХрдЯ рдХреЛ рд╣рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХреЗрд╡рд▓ рд╕рд░рдХрд╛рд░реА рдиреАрддрд┐рдпрд╛рдВ рдХрд╛рдо рдХрд░реЗрдВрдЧреА?",
      language: "hi" as const,
    },
    {
      title: "рдСрдирд▓рд╛рдЗрди рд╢рд┐рдХреНрд╖рд╛ рдкрд╛рд░рдВрдкрд░рд┐рдХ рд╢рд┐рдХреНрд╖рд╛ рдЬрд┐рддрдиреА рдкреНрд░рднрд╛рд╡реА рд╣реИ?",
      description:
        "рдбрд┐рдЬрд┐рдЯрд▓ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкрд░ рд╢рд┐рдХреНрд╖рд╛ - рдХреНрдпрд╛ рдпрд╣ рдХрдХреНрд╖рд╛ рд╢рд┐рдХреНрд╖рд╛ рдХрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд┐рдХрд▓реНрдк рд╣реИ?",
      language: "hi" as const,
    },
    {
      title: "рд╢рд╛рдХрд╛рд╣рд╛рд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИ?",
      description:
        "рдорд╛рдВрд╕рд╛рд╣рд╛рд░ рдмрдирд╛рдо рд╢рд╛рдХрд╛рд╣рд╛рд░ - рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдФрд░ рдиреИрддрд┐рдХ рддрд░реНрдХ рдХреНрдпрд╛ рдХрд╣рддреЗ рд╣реИрдВ?",
      language: "hi" as const,
    },
    {
      title: "рдирд┐рдЬрддрд╛ рдмрдирд╛рдо рд╕реБрд░рдХреНрд╖рд╛: рд╣рдореЗрдВ рдХрд┐рддрдирд╛ рд╕рдордЭреМрддрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?",
      description:
        "рд╕рд░рдХрд╛рд░реА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣ - рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдХрд┐рддрдиреА рдирд┐рдЬрддрд╛ рдХрд╛ рддреНрдпрд╛рдЧ рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реИ?",
      language: "hi" as const,
    },
    {
      title: "рддрдХрдиреАрдХ рдмрдЪреНрдЪреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЛ рдХреИрд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреА рд╣реИ?",
      description:
        "рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рдФрд░ рдЯреИрдмрд▓реЗрдЯ рдХрд╛ рдмрдЪреНрдЪреЛрдВ рдкрд░ рдкреНрд░рднрд╛рд╡ - рд╣рд╛рдирд┐рдХрд╛рд░рдХ рдпрд╛ рд▓рд╛рднрджрд╛рдпрдХ?",
      language: "hi" as const,
    },
    {
      title: "рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдмреЗрд╕рд┐рдХ рдЗрдирдХрдо рдПрдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╕рдорд╛рдзрд╛рди рд╣реИ?",
      description:
        "рд╕рднреА рдирд╛рдЧрд░рд┐рдХреЛрдВ рдХреЛ рдореБрдлреНрдд рдЖрдп - рдХреНрдпрд╛ рдпрд╣ рдЖрд░реНрдерд┐рдХ рдЕрд╕рдорд╛рдирддрд╛ рдХреЛ рд╣рд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ?",
      language: "hi" as const,
    },
    // Chinese (zh) - 10 t├│picos pol├кmicos
    {
      title: "ф║║х╖ецЩ║шГ╜ф╝ЪхПЦф╗гф║║ч▒╗х╖еф╜ЬхРЧя╝Я",
      description: "AIхТМшЗкхКихМЦчЪДх┐лщАЯхПСх▒Х - ш┐Щхп╣х░▒ф╕ЪцШпхиБшГБш┐ШцШпф╝ЪхИЫщАацЦ░цЬ║ф╝Ъя╝Я",
      language: "zh" as const,
    },
    {
      title: "чд╛ф║дхкТф╜Ухп╣ц░Сф╕╗цШпхе╜цШпхЭПя╝Я",
      description: "чд╛ф║дхкТф╜УхжВф╜ХцФ╣хПШцФ┐ц▓╗шоишо║ - цШпчзпцЮБчЪДш┐ШцШпц╢ИцЮБчЪДх╜▒хУНя╝Я",
      language: "zh" as const,
    },
    {
      title: "хКахпЖш┤зх╕БшГ╜хПЦф╗гф╝ач╗Яш┤зх╕БхРЧя╝Я",
      description: "цпФчЙ╣х╕БхТМхЕ╢ф╗ЦхКахпЖш┤зх╕Б - ш┐ЩцШпцЬкцЭечЪДш┤зх╕Бш┐ШцШпхПкцШпцКХцЬ║я╝Я",
      language: "zh" as const,
    },
    {
      title: "ш┐ЬчиЛх╖еф╜ЬцЫ┤хе╜ш┐ШцШпхКЮхЕмходх╖еф╜Ья╝Я",
      description: "чЦлцГЕхРОя╝МхЕмхП╕шжБц▒ВхСШх╖еш┐ФхЫЮхКЮхЕмход - ш┐ЩцШпцнгчбочЪДхЖ│хоЪхРЧя╝Я",
      language: "zh" as const,
    },
    {
      title: "ц░ФхАЩхПШхМЦя╝Ъф╕кф║║шбМхКиш╢│хдЯхРЧя╝Я",
      description: "ф╕кф║║хКкхКЫшГ╜шзгхЖ│ц░ФхАЩхН▒цЬ║хРЧя╝Мш┐ШцШпхПкцЬЙцФ┐х║ЬцФ┐чнЦцЙНшГ╜хеПцХИя╝Я",
      language: "zh" as const,
    },
    {
      title: "хЬич║┐цХЩшВ▓хТМф╝ач╗ЯцХЩшВ▓ф╕Аца╖цЬЙцХИхРЧя╝Я",
      description: "цХ░хнЧх╣│хП░ф╕КчЪДцХЩшВ▓ - ш┐ЩцШпшп╛хаВцХЩшВ▓чЪДчЬЯцнгцЫ┐ф╗гцЦ╣цбИхРЧя╝Я",
      language: "zh" as const,
    },
    {
      title: "ч┤ащгЯхп╣хБех║╖хТМчОпхвГцЫ┤хе╜хРЧя╝Я",
      description: "шВЙщгЯф╕Оч┤ащгЯ - чзСхнжхТМф╝жчРЖшо║цНошп┤ф║Жф╗Аф╣Ия╝Я",
      language: "zh" as const,
    },
    {
      title: "щЪРчзБф╕ОхоЙхЕия╝ЪцИСф╗мх║ФшпехжехНПхдЪх░Ся╝Я",
      description: "цФ┐х║ЬчЫСцОзхТМцХ░цНоцФ╢щЫЖ - ф╕║ф║ЖхоЙхЕицФ╛х╝ГхдЪх░СщЪРчзБцШпхПпф╗ецОехПЧчЪДя╝Я",
      language: "zh" as const,
    },
    {
      title: "цКАцЬпхжВф╜Хх╜▒хУНхД┐члехПСх▒Хя╝Я",
      description: "цЩ║шГ╜цЙЛцЬ║хТМх╣│цЭ┐чФ╡шДСхп╣хД┐члечЪДх╜▒хУН - цЬЙхо│ш┐ШцШпцЬЙчЫКя╝Я",
      language: "zh" as const,
    },
    {
      title: "хЕиц░СхЯ║цЬмцФ╢хЕецШпхПпшбМчЪДшзгхЖ│цЦ╣цбИхРЧя╝Я",
      description: "ч╗ЩцЙАцЬЙхЕмц░СцПРф╛ЫхЕНш┤╣цФ╢хЕе - ш┐ЩшГ╜шзгхЖ│ч╗Пц╡Оф╕Нх╣│чнЙхРЧя╝Я",
      language: "zh" as const,
    },
  ];

  console.log(`ЁЯУЭ A criar ${topics.length} t├│picos...\n`);

  let created = 0;
  const errors: Array<{ title: string; error: string }> = [];

  for (const topic of topics) {
    try {
      const slug = generateSlug(topic.title);
      await prisma.topic.create({
        data: {
          title: topic.title,
          description: topic.description,
          language: topic.language,
          slug,
          status: "ACTIVE",
          createdById: user.id,
        },
      });
      created++;
      console.log(`тЬЕ [${topic.language}] ${topic.title}`);
    } catch (error) {
      const errorMessage =
        error instanceof Error ? error.message : "Erro desconhecido";
      errors.push({ title: topic.title, error: errorMessage });
      console.log(`тЭМ [${topic.language}] ${topic.title} - ${errorMessage}`);
    }
  }

  console.log(`\nтЬи Resumo:`);
  console.log(`   тЬЕ Criados: ${created}`);
  console.log(`   тЭМ Erros: ${errors.length}`);

  if (errors.length > 0) {
    console.log(`\nтЪая╕П  Erros encontrados:`);
    errors.forEach((e) => {
      console.log(`   - ${e.title}: ${e.error}`);
    });
  }

  // Contagem por idioma
  const counts = await prisma.topic.groupBy({
    by: ["language"],
    _count: true,
  });

  console.log(`\nЁЯУК T├│picos por idioma:`);
  counts.forEach((c) => {
    console.log(`   ${c.language}: ${c._count}`);
  });
}

main()
  .catch((e) => {
    console.error("тЭМ Erro fatal:", e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
